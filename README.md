
# SMS Sending with SMS Chef API Integration & Web Scrapping

This project is a Python-based SMS notification system that sends market price updates via the SMS Chef API. It includes data fetching, processing, and SMS sending functionality, and leverages environment variables for sensitive information like API keys and phone numbers.

## Project Structure

- `main.py` - Main script that fetches, extracts, and sends data via SMS.
- `data_fetching.py` - Script responsible for retrieving raw data.
- `extract_data.py` - Script for processing and structuring data for message content.
- `.env` - Environment variables file, to securely store your API keys and other sensitive data.
- `requirements.txt` - Python package requirements.

## Prerequisites

- **Python 3.6+**
- **SMS Chef Account** - Sign up on [SMS Chef](https://smschef.com) and obtain your API keys.

## Setup

1. **Clone the repository**:
   ```bash
   git clone https://github.com/yourusername/sms_python.git
   cd sms_python
   ```

2. **Install dependencies**:
   ```bash
   pip install -r requirements.txt
   ```

3. **Environment Variables**:
   Create a `.env` file in the project root to store your SMS Chef API credentials and other configuration details. The `.env` file should look like:

   ```plaintext
   api_key=YOUR_API_SECRET
   device=YOUR_DEVICE_ID
   url=https://www.cloud.smschef.com/api/send/sms
   recipient_number=RECIPIENT_PHONE_NUMBER

   opening_url = "https://www.commodityonline.com/mandiprices/"
   closing_url = "/maharashtra/karanja"
   ```

   change the opening and closing url as per your requirements

4. **Run the Script**:
   ```bash
   python main.py
   ```

## Usage

The script follows these main steps:

1. **Fetch Data** - Retrieves the raw data using `fetch_data()`.
2. **Extract Data** - Processes the data to prepare SMS-ready content using `extract_data()`.
3. **Generate Message** - Constructs a message with the market prices for different items.
4. **Send SMS** - Uses the SMS Chef API to send the message to the specified recipient.

### Code Overview

#### `send_sms()`

The `send_sms()` function sends a message using the SMS Chef API. It constructs an HTTP POST request with parameters such as the device ID, recipient number, message priority, and the message content.

#### `getMessage()`

The `getMessage()` function formats the message content by extracting key data points, such as crop prices. It limits the output to a few items for brevity in the SMS format.

### Requirements

Install the following packages from `requirements.txt`:

- `requests` - For making HTTP requests to the SMS Chef API.
- `python-dotenv` - To load environment variables from the `.env` file.

To install the requirements, use:
```bash
pip install -r requirements.txt
```

### Example Message Format

An example message generated by `getMessage()` for my home town market(karanja lad) could look like:

```plaintext
soyabean:
Average Price: ‚Çπ4250/Quintal
Lowest Market Price: ‚Çπ3805.00/Quintal
Costliest Market Price: ‚Çπ4445.00/Quintal

green-gram-moong-whole:
Average Price: ‚Çπ5555/Quintal
Lowest Market Price: ‚Çπ5400.00/Quintal
Costliest Market Price: ‚Çπ6700.00/Quintal

black-gram-urd-beans-whole:
Average Price: ‚Çπ6595/Quintal
Lowest Market Price: ‚Çπ5500.00/Quintal
Costliest Market Price: ‚Çπ7200.00/Quintal

sesamum-sesamegingellytil:
Average Price: ‚Çπ10875/Quintal
Lowest Market Price: ‚Çπ10855.00/Quintal
Costliest Market Price: ‚Çπ10890.00/Quintal

wheat:
Average Price: ‚Çπ2820/Quintal
Lowest Market Price: ‚Çπ2780.00/Quintal
Costliest Market Price: ‚Çπ2895.00/Quintal

jowar-sorghum:
Average Price: ‚Çπ1800/Quintal
Lowest Market Price: ‚Çπ1715.00/Quintal
Costliest Market Price: ‚Çπ1930.00/Quintal
```

## üåü Contributions

Contributions are always welcome! Please follow these steps to contribute:

1. Fork the project.
2. Create a feature branch: `git checkout -b feature/your-feature`.
3. Commit your changes: `git commit -m 'Add a feature'`.
4. Push the branch: `git push origin feature/your-feature`.
5. Open a Pull Request.

---

### üåê Stay Connected

- **GitHub**: [HarromPS](https://github.com/HarromPS/)
- **Linkedin**: [HariomShivhare](https://www.linkedin.com/in/hariom-shivhare-a32803290/)

---

Enjoy your SMS sending application with üöÄ speed and üéØ precision!

---